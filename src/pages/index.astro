---
import '../styles/global.css'
import Navigation from '@/components/Navigation.astro'
import HeroSection from '@/components/HeroSection.astro'
import ResumeSection from '@/components/ResumeSection.astro'
import ProjectsSection from '@/components/ProjectsSection.astro'
import ContactSection from '@/components/ContactSection.astro'

const og_image =
    'https://media.licdn.com/dms/image/v2/D4D16AQFiYdy3kO95ew/profile-displaybackgroundimage-shrink_350_1400/B4DZd.1TpFH4Ag-/0/1750179593493?e=1755734400&v=beta&t=XfogOVxuOV35XsOIckuXXVtIYXzWhpgPGRJ-6MBA3t4'

const description =
    'Developer ≠ Just Code · NixOS, NeoVim & Infra Enthusiast · OSS Contributor'

const title = `Portfolio - ${description}`

const faviconSizes = [
    '16x16',
    '32x32',
    '48x48',
    '180x180',
    '192x192',
    '256x256',
    '512x512',
] as const

const hideForCV = import.meta.env.CV !== undefined
const htmlClassList = import.meta.env.CV === 'dark' ? ['dark'] : []
---

<html lang="en" class:list={htmlClassList}>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            {title}
        </title>
        <meta
            name="description"
            content="Professional portfolio showcasing full-stack development skills, projects, and experience"
        />
        <meta name="author" content="Zhifan" />

        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:type" content="website" />
        <meta property="og:image" content={og_image} />
        <meta property="og:url" content="https://c3n21.github.io" />
        <meta property="og:site_name" content="https://c3n21.github.io" />
        <meta name="twitter:card" content="summary_large_image" />
        <!-- <meta name="twitter:site" content="@For future use" /> -->
        <meta name="twitter:image" content={og_image} />

        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
            rel="stylesheet"
        />
        {
            faviconSizes.map((size) => (
                <link
                    rel="icon"
                    type="image/png"
                    sizes={size}
                    href={`/favicon-${size}.png`}
                />
            ))
        }
        <link rel="shortcut icon" href="/favicon.ico" />
    </head>

    <body>
        <div class="min-h-screen bg-background">
            {!hideForCV && <Navigation />}
            <main>
                <HeroSection />
                <ResumeSection />
                {!hideForCV && <ProjectsSection />}
                <ContactSection />
            </main>

            {
                !hideForCV && (
                    <footer class="bg-background border-t border-border py-8">
                        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div class="text-center text-muted-foreground">
                                <p class="text-sm">
                                    © 2025 Zhifan. Prototyped by Loveable,
                                    built with TypeScript, Astro and Tailwind
                                    CSS.
                                </p>
                                <p class="text-xs mt-2">
                                    Designed with ❤️ for an amazing user
                                    experience.
                                </p>
                            </div>
                        </div>
                    </footer>
                )
            }
        </div>
    </body>
</html>

---
import { Sun, Moon } from '@lucide/astro'
import Button from './Button.astro'
---

<Button variant="ghost" size="icon" class="hover-scale" id="theme-toggle">
    <Sun
        class="sun dark:hidden h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-88 dark:scale-0"
    />
    <Moon
        class="moon absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"
    />
    <span class="sr-only">Toggle theme</span>
</Button>

<script>
    const toggler = document.getElementById('theme-toggle')
    if (toggler) {
        let currentTheme = window.matchMedia('(prefers-color-scheme: dark)')
            .matches
            ? 'dark'
            : 'light'

        function toggle() {
            if (currentTheme === 'dark') {
                currentTheme = 'light'
            } else {
                currentTheme = 'dark'
            }
            document.documentElement.classList.toggle('dark')
        }

        toggler.addEventListener('click', toggle)
    }
</script>
